<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multi-Room Chat + DMs</title>
<link rel="stylesheet" href="style.css">
</head>
<body data-theme="sunset-glow">

<div id="container">

  <!-- Top Bar -->
  <header id="topBar">
    <div class="user-controls">
      <span>Username: <b id="currentUsername"></b></span>
      <button id="changeUsernameBtn" class="styled-btn">Change Username</button>
    </div>
    <div class="room-controls">
      <label for="themeSelect">Theme:</label>
      <select id="themeSelect" class="styled-select"></select>
      <button id="generateLinkBtn" class="styled-btn">Generate Link</button>
      <input id="newRoomInput" placeholder="New room name" class="styled-input">
      <button id="joinRoomBtn" class="styled-btn">Join Room</button>
    </div>
  </header>

  <!-- Main Content -->
  <main id="chatContent">
    <!-- Group Chat Messages -->
    <section id="messagesContainer">
      <div id="gcMessages" class="messages-panel"></div>
    </section>

    <!-- Sidebar -->
    <aside id="sidebar">
      <h3>Group Chats</h3>
      <ul id="gcList"></ul>

      <h3>Users</h3>
      <ul id="userList"></ul>
    </aside>
  </main>

  <!-- Input Area -->
  <footer id="inputArea">
    <input id="messageInput" type="text" placeholder="Type a message..." autocomplete="off">
    <button id="sendBtn" class="styled-btn">Send</button>
  </footer>
</div>

<!-- DM Panel -->
<div id="dmPanel" class="hidden" style="position:fixed;top:0;left:0;width:100%;height:100%;background:var(--background);display:flex;z-index:1000;">
  <!-- DM List Sidebar -->
  <div id="dmListSidebar" style="width:250px;background:var(--sidebar-bg);border-right:2px solid var(--separator);display:flex;flex-direction:column;">
    <div style="padding:10px;font-weight:bold;color:white;">Direct Messages</div>
    <ul id="dmList" style="flex:1;overflow-y:auto;"></ul>
  </div>

  <!-- DM Messages Panel -->
  <div style="flex:1;display:flex;flex-direction:column;">
    <div id="dmHeader" style="padding:10px;border-bottom:1px solid var(--separator);color:white;font-weight:bold;">Select a chat</div>
    <div id="dmMessages" class="messages-panel" style="flex:1;overflow-y:auto;padding:10px;"></div>
    <div style="display:flex;padding:10px;border-top:1px solid var(--separator);">
      <input id="dmMessageInput" type="text" placeholder="Type a message..." style="flex:1;border:none;border-radius:20px 0 0 20px;padding:10px;background:var(--input-bg);color:white;">
      <button id="dmSendBtn" class="styled-btn" style="border-radius:0 20px 20px 0;">Send</button>
    </div>
  </div>
  <button id="dmCloseBtn" class="styled-btn" style="position:absolute;top:10px;right:10px;">Close</button>
</div>

<script type="module" src="script.js"></script>
<script src="/socket.io/socket.io.js"></script>
</body>
</html>
