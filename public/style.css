:root {
    /* Default Discord Dark Theme */
    --primary: #5865f2;
    --background: #36393f;
    --sidebar-bg: #2f3136;
    --text: #ffffff;
    --input-bg: #40444b;
    --system-text: #72767d;
    --separator: #202225; /* Darker separator for contrast */
    --bubble-self: #5865f2; /* Primary color for self bubble */
    --bubble-other: #40444b; /* Input background for other bubble */
    --hover-color: #4f545c;
    --button-hover: #4752c4;
}

/* Base structure */
body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: var(--background);
    color: var(--text);
    transition: background-color 0.3s, color 0.3s;
}

#app {
    display: flex;
    height: 100vh;
    overflow: hidden;
}

/* Sidebar (Left Panel) */
#sidebar {
    width: 280px;
    min-width: 250px;
    background: var(--sidebar-bg);
    padding: 10px;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    border-right: 2px solid var(--separator);
    box-sizing: border-box;
}

.list-section {
    margin-bottom: 15px;
}

.separator {
    border: 0;
    height: 1px;
    background: var(--separator);
    margin: 10px 0;
}

/* User Profile & Controls */
.user-profile {
    padding: 10px;
    background: var(--input-bg);
    border-radius: 5px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.user-profile button {
    background: var(--primary);
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 3px;
    cursor: pointer;
    font-size: 0.8em;
}

/* Room Controls */
.room-controls button {
    width: 100%;
    background: var(--primary);
    color: white;
    border: none;
    padding: 10px;
    margin-top: 5px;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.2s;
}
.room-controls button:hover {
    background: var(--button-hover, #4752c4);
}

/* User/Room List Styling */
#sidebar ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

#sidebar li {
    padding: 8px;
    border-radius: 5px;
    cursor: default;
    transition: 0.2s;
    margin-top: 3px;
}

#userList li:not(:last-child) {
    margin-bottom: 3px;
}

#userList li:not(:contains('You')):hover { /* Apply hover to other users for DM */
    background: var(--primary);
    color: #fff;
    cursor: pointer;
}

/* Main Chat Area */
#chat-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--background);
    position: relative;
}

/* Chat Header */
#chat-header {
    padding: 10px 20px;
    background: var(--sidebar-bg);
    border-bottom: 2px solid var(--separator);
}

/* Message Container */
#chat-messages {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
    position: relative;
}

/* Input Area (Bottom) */
#input-area {
    display: flex;
    padding: 10px 20px;
    background: var(--background); /* Match the chat background */
}

#input-area input {
    flex: 1;
    padding: 12px 18px;
    border-radius: 20px;
    border: none;
    background: var(--input-bg);
    color: var(--text);
    margin-right: 10px;
}

#input-area button {
    padding: 10px 20px;
    border: none;
    border-radius: 20px;
    background: var(--primary);
    color: #fff;
    cursor: pointer;
    transition: background 0.2s;
}
#input-area button:hover {
    background: var(--button-hover, #4752c4);
}


/* Message Bubbles */
.message {
    max-width: 70%;
    padding: 10px 15px;
    border-radius: 18px;
    word-wrap: break-word;
    font-size: 0.95em;
    line-height: 1.4;
    position: relative;
}

.message.self {
    background: var(--bubble-self);
    align-self: flex-end;
    color: #fff;
    border-bottom-right-radius: 5px;
}

.message.other {
    background: var(--bubble-other);
    align-self: flex-start;
    color: #fff;
    border-bottom-left-radius: 5px;
}

.message.system {
    background: var(--system-text);
    font-style: italic;
    align-self: center;
    color: #fff;
    border-radius: 8px;
    font-size: 0.8em;
    padding: 5px 10px;
}

.message span {
    font-weight: bold;
    margin-right: 5px;
}

/* DM Panel (Right Panel) */
#dm-panel {
    width: 350px;
    min-width: 300px;
    background: var(--sidebar-bg);
    display: flex;
    flex-direction: column;
    border-left: 2px solid var(--separator);
    box-sizing: border-box;
}

#dm-panel.hidden {
    display: none;
}

#dm-header {
    padding: 10px 20px;
    background: var(--sidebar-bg);
    border-bottom: 2px solid var(--separator);
    display: flex;
    justify-content: space-between;
    align-items: center;
}
#dm-header button {
    background: none;
    border: none;
    color: var(--text);
    font-size: 1.2em;
    cursor: pointer;
    opacity: 0.7;
}
#dm-header button:hover {
    opacity: 1;
}

#dm-messages {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

#dm-input {
    display: flex;
    padding: 10px 20px;
    background: var(--background); 
}

#dm-input input {
    flex: 1;
    padding: 12px 18px;
    border-radius: 20px;
    border: none;
    background: var(--input-bg);
    color: var(--text);
    margin-right: 10px;
}

#dm-input button {
    padding: 10px 20px;
    border: none;
    border-radius: 20px;
    background: var(--primary);
    color: #fff;
    cursor: pointer;
}


/* --- THEME STYLES (Fixed UI/UX for specific themes) --- */

/* 1. Discord Dark (Default above) */
body[data-theme='dark-discord'] { }

/* 2. Sunset Glow */
body[data-theme='sunset-glow'] { --primary:#ff6e6e; --bubble-self:#ff9f80; --bubble-other:#ff6e6e; --background:#2c1a1a; --sidebar-bg:#1a0c0c; --input-bg:#3c2c2c; }

/* 3. Purple Haze */
body[data-theme='purple-haze'] { --primary:#9b59b6; --bubble-self:#a68ed3; --bubble-other:#9b59b6; --background:#1a0a1a; --sidebar-bg:#0a000a; --input-bg:#3c2c3c; }

/* 4. Deep Ocean */
body[data-theme='deep-ocean'] { --primary:#2980b9; --bubble-self:#3498db; --bubble-other:#2980b9; --background:#0a1a2a; --sidebar-bg:#000a1a; --input-bg:#1a2a3a; }

/* 5. Royal Blue */
body[data-theme='royal-blue'] { --primary:#4169e1; --bubble-self:#637eea; --bubble-other:#4169e1; --background:#0a0f2a; --sidebar-bg:#00051a; --input-bg:#1a1f3a; }

/* 6. Sky Breeze */
body[data-theme='sky-breeze'] { --primary:#5dade2; --bubble-self:#85c1e9; --bubble-other:#5dade2; --background:#0a1a20; --sidebar-bg:#000a10; --input-bg:#1a2a30; }

/* 7. Hot Pink */
body[data-theme='hot-pink'] { --primary:#ff69b4; --bubble-self:#ff85c1; --bubble-other:#ff69b4; --background:#2a0a1a; --sidebar-bg:#1a000a; --input-bg:#3a1a2a; }

/* 8. Molten Orange */
body[data-theme='molten-orange'] { --primary:#ff4500; --bubble-self:#ff714d; --bubble-other:#ff4500; --background:#2a140a; --sidebar-bg:#1a0a00; --input-bg:#3a241a; }

/* 9. Golden Hour */
body[data-theme='golden-hour'] { --primary:#f1c40f; --bubble-self:#f7dc6f; --bubble-other:#f1c40f; --background:#2a2a0a; --sidebar-bg:#1a1a00; --input-bg:#3a3a1a; }

/* 10. Rose Red */
body[data-theme='rose-red'] { --primary:#e74c3c; --bubble-self:#ec7063; --bubble-other:#e74c3c; --background:#2a0a0a; --sidebar-bg:#1a0000; --input-bg:#3a1a1a; }

/* 11. Violet Dream */
body[data-theme='violet-dream'] { --primary:#8e44ad; --bubble-self:#a569bd; --bubble-other:#8e44ad; --background:#140a2a; --sidebar-bg:#0a001a; --input-bg:#241a3a; }

/* 12. Indigo Night (FIXED: Improved contrast and depth) */
body[data-theme='indigo-night'] { --primary:#6f42c1; --bubble-self:#7952b3; --bubble-other:#4b0082; --background:#1a1c37; --sidebar-bg:#101128; --input-bg:#313456; }

/* 13. Mystic Purple */
body[data-theme='mystic-purple'] { --primary:#9b59b6; --bubble-self:#af7ac5; --bubble-other:#9b59b6; --background:#1a0a2a; --sidebar-bg:#0a001a; --input-bg:#2a1a3a; }

/* 14. Fuchsia Glow */
body[data-theme='fuchsia-glow'] { --primary:#d648a1; --bubble-self:#e066b1; --bubble-other:#d648a1; --background:#2a0a20; --sidebar-bg:#1a0010; --input-bg:#3a1a30; }

/* 15. Electric Blue (FIXED: Improved contrast and depth) */
body[data-theme='electric-blue'] { --primary:#00b8d4; --bubble-self:#00e5ff; --bubble-other:#00b8d4; --background:#172a3a; --sidebar-bg:#0f1d2a; --input-bg:#2d4253; }

/* 16. Aqua Mist */
body[data-theme='aqua-mist'] { --primary:#7fdbff; --bubble-self:#a3e4ff; --bubble-other:#7fdbff; --background:#0a1a1a; --sidebar-bg:#000a0a; --input-bg:#1a2a2a; }

/* 17. Magenta Pulse */
body[data-theme='magenta-pulse'] { --primary:#ff00ff; --bubble-self:#ff66ff; --bubble-other:#ff00ff; --background:#1a0a1a; --sidebar-bg:#0a000a; --input-bg:#2a1a2a; }

/* 18. Blazing Orange */
body[data-theme='blazing-orange'] { --primary:#ff6600; --bubble-self:#ff944d; --bubble-other:#ff6600; --background:#2a140a; --sidebar-bg:#1a0a00; --input-bg:#3a241a; }

/* 19. Sunlit Gold */
body[data-theme='sunlit-gold'] { --primary:#ffd700; --bubble-self:#ffe066; --bubble-other:#ffd700; --background:#2a2a0a; --sidebar-bg:#1a1a00; --input-bg:#3a3a1a; }

/* 20. Royal Violet */
body[data-theme='royal-violet'] { --primary:#7d3c98; --bubble-self:#9b59b6; --bubble-other:#7d3c98; --background:#1a0a2a; --sidebar-bg:#0a001a; --input-bg:#2a1a3a; }

/* 21. Night Indigo */
body[data-theme='night-indigo'] { --primary:#191970; --bubble-self:#2e2e8f; --bubble-other:#191970; --background:#0a0a2a; --sidebar-bg:#00001a; --input-bg:#1a1a3a; }

/* Additional Theme */
body[data-theme='forest-green'] { --primary:#27ae60; --bubble-self:#2ecc71; --bubble-other:#27ae60; --background:#1a2a1a; --sidebar-bg:#0a1a0a; --input-bg:#2a3a2a; }
